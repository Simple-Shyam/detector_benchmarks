image: eicweb.phy.anl.gov:4567/containers/eic_container/eic_container:latest 

stages:
  - trackers
  - calorimeters
  - pid
  - others

track_test1:
  stage: trackers
  script:
    - bash trackers/dummy_test.sh

cal_test1:
  stage: calorimeters
  script:
    - bash calorimeters/dummy_test.sh

pid_test1:
  stage: pid
  script:
    - bash pid/dummy_test.sh


#compile:
#  stage: build
#  #tags:
#  #   - singularity
#  script:
#    - ./bin/do_build
#
#      #trigger:
#      #  stage: containerize
#      #  script: curl -X POST -F token=8806e69cdc802d752413e8a31554a2 -F ref=master https://eicweb.phy.anl.gov/api/v4/projects/290/trigger/pipeline
#      #

pages:
  image: alpine
  when: manual
  stage: build
  script:
  - apk update && apk add doxygen  graphviz ttf-ubuntu-font-family
  - cd doc && doxygen Doxyfile && mv doxygen_output/html/ ../public/
  artifacts:
    paths:
    - public
  only:
  - master
